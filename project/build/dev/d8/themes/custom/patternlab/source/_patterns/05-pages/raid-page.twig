{% extends "@templates/site-layout.twig" %}

{% block content %}

  {# Top stats/actions for a raid page #}
  {% embed "@atoms/layout/section-container.twig" with { name: 'raid-top' } %}
    {% block section_container_content %}

      {% embed '@atoms/layout/columns-8-4.twig' with { name: 'raid-top' } %}
        {% block first %}

          <h2 class="title">{{ 'Latest'|t }}</h2>

          {% set pinned_post = nodes[0] %}
          {# Move the following logic to a single template (do this in tracker #}
          {% set type = pinned_post.type == 'media' ? 'media' : 'default' %}
          {% include "@molecules/cards/card-tracker-" ~ type ~ ".twig" with pinned_post %}

        {% endblock first %}

        {% block second %}
          <h2 class="title">{{ 'Events'|t }}</h2>
        {% endblock %}
      {% endembed %}

    {% endblock %}
  {% endembed %}

  {# Raid member grid #}
  {% embed "@atoms/layout/full-bg.twig" with
    {
      name: 'raid-members',
      image_path: paths.images ~ '/backgrounds/priest-hall.jpg',
    }
  %}
    {% block full_bg_content %}
      <div class="row">
        <div class="col-sm-12">
          <h2 class="title text-center">{{ characters|length }} {{ 'Members'|t }}</h2>
        </div>
      </div>

      <div class="row">
        {% for character in characters %}
          <div class="col-sm-2">
            {% include "@molecules/character/raid-member/raid-member.twig" with {
              'character': character
            } %}
          </div>
        {% endfor %}
      </div>
    {% endblock %}
  {% endembed %}

  {# Raid bottom for news and stuff #}
  {% embed "@atoms/layout/section.twig" with { name: 'raid-bottom' } %}
    {% block section_content %}
      <div class="row">
        <div class="col-sm-12">
          <h1 class="text-center">Raid bottom down here.</h1>
        </div>
      </div>
    {% endblock %}
  {% endembed %}

{% endblock content %}

{% block sub %}
  {% embed '@atoms/layout/section-container.twig' with { 'name': 'raid-activity' } %}
  {% endembed %}
{% endblock %}
